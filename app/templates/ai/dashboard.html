{% extends "layout/base.html" %}

{% block content %}
<h1 class="mb-4">AI Assistant Activity</h1>

<div class="card">
    <table>
        <thead>
            <tr>
                <th>Ticket</th>
                <th>Type</th>
                <th>Suggestion</th>
                <th>Model</th>
                <th>Accepted</th>
                <th>Generated</th>
            </tr>
        </thead>
        <tbody>
            {% for suggestion in suggestions %}
            <tr>
                <td><a href="/tickets/{{ suggestion.ticket_id }}">#{{ suggestion.ticket_id }}</a></td>
                <td><span class="badge" style="background-color: var(--info); color: white;">{{ suggestion.suggestion_type|replace('_', ' ')|title }}</span></td>
                <td>
                    <div style="max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="{{ suggestion.content }}">
                        {{ suggestion.content }}
                    </div>
                </td>
                <td class="text-sm text-gray">{{ suggestion.model_used }}</td>
                <td>
                    {% if suggestion.accepted %}
                    <span class="badge badge-status-resolved">Yes</span>
                    {% else %}
                    <span class="badge badge-status-closed">No</span>
                    {% endif %}
                </td>
                <td class="text-sm text-gray">{{ suggestion.generated_at.strftime('%m-%d %H:%M') }}</td>
            </tr>
            {% else %}
            <tr><td colspan="6" class="text-center">No AI activity recorded.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
